package org.edu.hse.oop;

import org.edu.hse.exceptions.CrampedLegException;

import javax.xml.stream.FactoryConfigurationError;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class WorkerExploitation {

    private final List<Worker> workers;

    public WorkerExploitation(List<Worker> workers) {
        this.workers = workers;
    }

    public WorkerExploitation(Worker... workers) {
        this.workers = Arrays.asList(workers);
    }

    public int run() {

/*        int a = 10;
        try {
            workers.get(0).walk(100);
            return a;
        } catch (Throwable e) {
            return a;
        } finally {
            a = 30;
            return 10;
        }*/

//        workers.get(0).walk(10);

        workers.forEach(worker -> {
            try {
                worker.walk(1000);
            } catch (CrampedLegException e) {
                System.out.println("The worker got injured");
            } catch (Throwable t) {
                System.out.println("Something worse happened");
            }
            finally {
                System.out.println("Finally will be printed anyway");
            }
        });
        return 10;
    }

}
